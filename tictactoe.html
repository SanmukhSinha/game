<!DOCTYPE html>
<html>

<head>
    <link href="https://fonts.googleapis.com/css?family=Karla&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans&display=swap" rel="stylesheet">
    <title>
        Tic-Tac-Toe
    </title>
</head>
<style>
    body,
    html {
        height: 100%;
        width: 100%;
        margin: 0;
    }

    .heading {
        height: 8%;
        width: 100%;
        text-align: center;
        line-height: 150%;
        font-family: 'Josefin sans', sans-serif;
        font-size: 250%;
        padding: 8px;
        font-weight: bold;
        color: whitesmoke;
        position: relative;
        background-color: rgb(93, 9, 153);
        box-shadow: 0px 3px 5px #757373;
    }

    .leftpane {
        width: 30%;
        height: 85%;
        float: left;
        padding: 2%;
        font-family: 'Montserrat', sans-serif;
        font-size: 200%;
    }

    .board {
        width: 60%;
        margin-left: 35%;
        height: 50%;
        margin-top: 5%;
    }

    .X{
        font-weight: bold;
        font-family: 'Montserrat', sans-serif;
        color: red;
    }

    .O{
        font-weight: bold;
        font-family: 'Montserrat', sans-serif;
        color: royalblue;
    }

    .button{
        background-color: whitesmoke;
        border: none;
        color: darkorchid;
        padding: 2px 2px;
        text-align: center;
        box-shadow: 1px 1px 6px 6px lightgrey;
        display: inline-block;
        font-size: 80%;
        cursor: pointer;
    }

    .block {
        width: 30%;
        height: 100%;
        float: left;
        font-size: 500%;
        text-align: center;
        vertical-align: middle;
        line-height: 100%;
        display: inline-block;
    }

    .row {
        width: 100%;
        height: 30%;
        float: top;
    }
</style>

<body>
    <div class="heading">
        Tic-Tac-Toe
    </div>
    <div class="leftpane">
        Player :
        <span id="xplayer" class="X">

        </span>
        <span id="oplayer" class="O">

        </span>
        <br><br>
        Match:
        <span id="match">
            1
        </span>
        / 5
        <br><br>
        Score:
        <br>
        <span class="X">
            X
        </span>
        -
        <span id="xscore" class="X">
            0
        </span>
        <br>
        <span class="O">
            0
        </span>
        -
        <span id="oscore" class="O">
            0
        </span>
        <br><br>
        <form id="play">
            <input type="submit" value="New Game" class="button">
        </form>
        <br><br>
        <span id="winner" style="font-weight: bold">

        </span>
    </div>
    <div class="board">
        <div class="row">
            <div class="block" id="0" onclick="move(0)" style="border-right: 0.01em solid black; border-bottom: 0.01em solid black">
            </div>
            <div class="block" id="1" onclick="move(1)" style="border-left: 0.01em solid black; border-right: 0.01em solid black; border-bottom: 0.01em solid black">
            </div>
            <div class="block" id="2" onclick="move(2)" style="border-left: 0.01em solid black; border-bottom: 0.01em solid black">
            </div>
        </div>
        <div class="row">
            <div class="block" id="3" onclick="move(3)" style="border-top: 0.01em solid black; border-right: 0.01em solid black; border-bottom: 0.01em solid black">
            </div>
            <div class="block" id="4" onclick="move(4)" style="border: 0.01em solid black;">
            </div>
            <div class="block" id="5" onclick="move(5)" style="border-left: 0.01em solid black; border-top: 0.01em solid black; border-bottom: 0.01em solid black">
            </div>
        </div>
        <div class="row">
            <div class="block" id="6" onclick="move(6)" style="border-right: 0.01em solid black; border-top: 0.01em solid black">
            </div>
            <div class="block" id="7" onclick="move(7)" style="border-left: 0.01em solid black; border-right: 0.01em solid black; border-top: 0.01em solid black">
            </div>
            <div class="block" id="8" onclick="move(8)" style="border-left: 0.01em solid black; border-top: 0.01em solid black">
            </div>
        </div>
    </div>
    <script>
        player = ['X', 'O'];
        pos = 0;
        totalMatches = 5;

        function resetClass(id) {
            var element, name, arr;
            element = document.getElementById(id);
            arr = element.className.split(" ");
            if (arr.indexOf(name) == -1) {
                element.className = element.className.slice(0, -2);
            }
        }
        function setClass(id, cls) {
            var element, name, arr;
            element = document.getElementById(id);
            arr = element.className.split(" ");
            if (arr.indexOf(name) == -1) {
                element.className += " " + cls;
            }
        }

        function reset() {
            pos = 0;
            document.getElementById("xplayer").innerHTML = player[pos];
            document.getElementById("oplayer").innerHTML = "";
            document.getElementById("winner").innerHTML = "";

            for (i = 0; i < 9; i++) {
                b = document.getElementById(i.toString())
                if (b.innerHTML == "X" || b.innerHTML == "O") {
                    b.innerHTML = "";
                    resetClass(b.id);
                }
            }

        }

        function play() {
            reset();
            document.getElementById("match").innerHTML = 1;
            document.getElementById("xscore").innerHTML = 0;
            document.getElementById("oscore").innerHTML = 0;
        }

        function checkBoard() {
            b = [];
            w = 9;

            for (i = 0; i < 9; i++) {
                mv = document.getElementById(i.toString()).innerHTML
                if (mv == 'X')
                    b[i] = 0;
                else if (mv == 'O')
                    b[i] = 1;
                else
                    b[i] = 9;
            }

            for (i = 0; i < 3; i++) {
                sum = 0;
                for (j = 0; j < 3; j++)
                    sum += b[3 * i + j];
                if (sum == 0 || sum == 3)
                    return sum;
            }

            for (i = 0; i < 3; i++) {
                sum = 0;
                for (j = 0; j < 3; j++)
                    sum += b[3 * j + i];
                if (sum == 0 || sum == 3)
                    return sum;
            }
            sum = b[0] + b[4] + b[8];
            if (sum == 0 || sum == 3)
                return sum
            sum = b[2] + b[4] + b[6];
            if (sum == 0 || sum == 3)
                return sum;

            for (i = 0; i < 9; i++)
                if (b[i] == 9)
                    break;
            if (i == 9)
                return 999; /* 999 = draw */
            return w;
        }

        function checkGame() {
            x = parseInt(document.getElementById("xscore").innerHTML);
            o = parseInt(document.getElementById("oscore").innerHTML);
            m = parseInt(document.getElementById("match").innerHTML);
            if (m == totalMatches) {
                if (x > o)
                    alert("X Wins the Game");
                else if (o > x)
                    alert("O Wins the Game");
                else if (x == o)
                    alert("Draw");
            }
            else
                document.getElementById("match").innerHTML = m + 1;
        }

        function move(m) {
            b = document.getElementById(m);
            if (b.innerHTML != "X" && b.innerHTML != "O") {
                b.innerHTML = player[pos];
                setClass(m, player[pos]);
                if (pos) {
                    pos = 0;
                    document.getElementById("xplayer").innerHTML = "X";
                    document.getElementById("oplayer").innerHTML = "";
                }
                else {
                    pos = 1;
                    document.getElementById("oplayer").innerHTML = "O";
                    document.getElementById("xplayer").innerHTML = "";
                }

                w = checkBoard();
                if (w == 0) {
                    document.getElementById("winner").innerHTML = "X Wins";
                    s = parseInt(document.getElementById("xscore").innerHTML);
                    document.getElementById("xscore").innerHTML = s + 1;
                }
                if (w == 3) {
                    document.getElementById("winner").innerHTML = "O Wins";
                    s = parseInt(document.getElementById("oscore").innerHTML);
                    document.getElementById("oscore").innerHTML = s + 1;
                }
                if (w == 999) {
                    document.getElementById("winner").innerHTML = "Draw";
                }
                if (w == 999 || w == 0 || w == 3) {
                    setTimeout(function () { reset(); }, 1000);
                    setTimeout(function () { checkGame(); }, 1100);
                }
            }
        }

        document.getElementById("play").onsubmit = function (event) {
            event.preventDefault();
            play();
        }
        play();
    </script>
</body>

</html>